<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/styles.css" />
    <style>
      .main {
        display: flex;
        align-items: center;
        flex-direction: column;
        flex-grow: 1;
      }
      .p1 {
        margin-top: 10px;
        background-color: white;
        height: 260px;
        width: 1200px;
        display: flex;
      }
   
      .ps1 {
  position: relative;
  height: 260px;
  width: 800px;
  background-color: white;
  overflow: hidden;
}

.banner-slider {
  position: relative;
  width: 100%;
  height: 100%;
}

.banner-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  opacity: 0;
  transition: opacity 1s ease-in-out;
}

.banner-image.active {
  opacity: 1;
}
/* Dấu chấm điều hướng */
.dots-container {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 8px;
}

.dot {
  width: 12px;
  height: 12px;
  background-color: rgba(255, 255, 255, 0.5);
  border-radius: 50%;
  cursor: pointer;
  transition: background-color 0.3s;
}

.dot.active {
  background-color: white;
}

/* Nút điều khiển */
.prev-button, .next-button {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background-color: rgba(0, 0, 0, 0.5);
  color: white;
  border: none;
  cursor: pointer;
  font-size: 20px;
  padding: 10px;
  border-radius: 50%;
  transition: background-color 0.3s;
}

.prev-button {
  left: 10px;
}

.next-button {
  right: 10px;
}

.prev-button:hover, .next-button:hover {
  background-color: rgba(0, 0, 0, 0.8);
}

      .ps2 {
        margin-left: 10px;
        height: 259px;
        width: 400px;
        background-color: white;
      }
      .ps2 img {
        display: block;
        margin: 0;
        padding: 0;
      }
      .p2 {
        margin-top: 30px;
        background-color: rgb(204, 12, 12);
        height: 300px;
        width: 1200px;
        display: flex;
        justify-content: center;
        text-align: center;
      }
      .p3 {
        margin-top: 10px;
        background-color: white;
        width: 1200px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }
      
      .title {
        background-color: rgb(204, 12, 12);
        height: 50px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .title1 {
        margin-left: 10px;
        color: white;
        font-size: 25px;
      }

      .row {
        background-color: white;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        gap: 10px;
        padding: 10px;
      }

      /* Thiết lập kích thước đồng nhất cho các sản phẩm */
      .i4-comic {
  flex: 0 1 calc(20% - 10px); /* Hiển thị 5 sản phẩm trên một hàng */
  background-color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  text-align: center;
  height: 300px; 
  width: 220px; 
  border: 1px solid transparent; 
  transition: border 0.3s ease; 
}

.i4-comic img {
  margin-top: 10px;
  height: 180px; /* Đặt chiều cao cố định cho hình ảnh */
  width: 120px;  /* Đặt chiều rộng cố định cho hình ảnh */
  object-fit: contain; /* Đảm bảo hình ảnh không bị biến dạng */
}

/* Hiển thị viền khi hover */
.i4-comic:hover {
  border: 2px solid rgb(235, 229, 229); /* Tạo khung có độ dày 2px màu khi hover */
}

      .name-comics,
      .price-comics {
        color: rgb(21, 21, 21);
        text-align: left;
        margin-top: 5px;
        width: 100%; /* Đảm bảo nội dung căn lề theo chiều rộng */
        padding: 0 10px; /* Thêm khoảng cách cho nội dung */
      }
      .price-comics {
        color: red;
      }
      .name-comics {
        max-width: 190px;
      }
      a:hover {
        color: red;
      }
      a {
        text-decoration: none;
        color: black;
      }


      @media (max-width: 1224px) {
    .p3 {
        width: 90%;
        margin: 10px auto;
        box-shadow: none;
    }

    .i4-comic {
        flex: 0 1 calc(25% - 10px) !important; /* Đảm bảo chỉ hiển thị 2 sản phẩm trên một hàng */
        width: 100% !important;
        margin-bottom: 10px;
       
    }

    

    .name-comics, .price-comics {
        font-size: 14px;
    }
    .ps2{
      display: none;
    }
    .p1
    {
      width: 800px;
    height: auto;}
      #ps1{
        width: 100%;
      }
}
@media (max-width: 1000px) {
    .i4-comic {
        flex: 0 1 calc(33.3% - 10px) !important; /* Đảm bảo chỉ hiển thị 2 sản phẩm trên một hàng */
        width: 100% !important;
        margin-bottom: 10px;
     
    }
}
@media (max-width: 800px) {
    .i4-comic {
        flex: 0 1 calc(50% - 10px) !important; /* Đảm bảo chỉ hiển thị 2 sản phẩm trên một hàng */
        width: 100% !important;
        margin-bottom: 10px;
       
    }
    .p3{
      width: 100%;
      border-radius: 0px !important;
      margin-top: 5px !important;
      margin-bottom: 0px !important;
    }
    .p1{
      width: 100%;
      height:32.5vw;
    }
    .ps1{
      height:32.5vw;
      width: 100%;
    }
    .title1{
      height: auto;
      font-size: 20px !important;
    }
    .title{
      display: flex;
    
    align-items: center; /* Canh giữa theo chiều dọc */
      height: 40px !important;
    }
}
@media (max-width: 530px) {
  #ic {
  
  height: auto; /* Đặt chiều cao cố định cho hình ảnh */
  width: 90px;  
  
}
   
}
@media (max-width: 400px) {
   
    .title1{
      height: auto !important;
      font-size: 15px !important;
    }
    .title{
      
      height: 25px !important;
    }
}
    </style>
  </head>
  <body>
    <div class="container">
      <div id="header"></div>

      <main class="main">
        <div class="p1">
          <!-- <div class="ps1">
            <img src="" alt="" id="myImage" height="250px" width="700px" />
          </div> -->
          <div class="ps1" id="ps1">
            <div class="banner-slider">
              <img src="images/bnluffy.png" alt="Banner 1" class="banner-image active" />
              <img src="images/bn7v.png" alt="Banner 2" class="banner-image" />
              <img src="images/bnop.jpg" alt="Banner 3" class="banner-image" />
              <img src="images/bnnaru.jpg" alt="Banner 4" class="banner-image" />
              <img src="images/bnic.jpg" alt="Banner 5" class="banner-image" />
            </div>
              <!-- Thêm các dấu chấm điều hướng -->
  <div class="dots-container">
    <span class="dot active"></span>
    <span class="dot"></span>
    <span class="dot"></span>
    <span class="dot"></span>
    <span class="dot"></span>
  </div>
  <!-- Thêm các nút điều khiển -->
  <button class="prev-button">&lt;</button>
  <button class="next-button">&gt;</button>
          </div>          
          <div class="ps2" id="ps2">
            
              <img src="images/bnt1.png" alt="" height="259px" width="400px" />
           
            <!-- <div class="ps2-bottom">
              <img src="" alt="" height="125px" width="485px" />
            </div> -->
          </div>
        </div>
        <!-- <div class="p2">Flash Sale</div> -->

        <!-- Phần sản phẩm bán chạy -->
        <div class="p3">
          <div class="title">
            <div class="title1">Bán chạy</div>
          </div>
          <div class="row" id="best-sellers"></div>
        </div>

        <!-- Phần truyện tranh mới -->
        <div class="p3" style="margin-top: 10px">
          <div class="title">
            <div class="title1">Truyện tranh mới</div>
          </div>
          <div class="row" id="new-comics"></div>
        </div>
      </main>

      <div id="footer"></div>
    </div>

    <script>
      // Hàm định dạng giá
      function formatPrice(price) {
        return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
      }

      // Hàm tạo phần tử HTML sản phẩm
      function createComicItem(comic) {
        const comicDiv = document.createElement("div");
        comicDiv.classList.add("i4-comic");
        // Kiểm tra nếu quantity bằng 0 thì hiển thị chữ "Hết hàng"
         const stockStatus = comic.quantity === 0 ? '<span style="color:blue; ">(HẾT HÀNG)</span>' : ''
        comicDiv.innerHTML = `
          <a href="ChiTietSP.html?id=${comic.id}">
            <img src="${comic.url || 'default-image.png'}" alt="Comic image" id="ic"/>
            <div class="name-comics">${comic.name}</div>
            <div class="price-comics">${formatPrice(comic.price)} VND ${stockStatus}</div>
          </a>
        `;

        return comicDiv;
      }

      // Hàm tải và hiển thị sản phẩm
      function loadComics(apiUrl, containerId) {
        fetch(apiUrl)
          .then((response) => response.json())
          .then((data) => {
            const comicContainer = document.getElementById(containerId);
            comicContainer.innerHTML = ""; // Xóa nội dung cũ

            data.forEach((comic) => {
              const comicDiv = createComicItem(comic);
              comicContainer.appendChild(comicDiv);
            });
          })
          .catch((error) => {
            console.error("Lỗi khi lấy dữ liệu từ API:", error);
          });
      }
      // Hàm tương tác với banner
      document.addEventListener("DOMContentLoaded", function () {
  let currentIndex = 0;
  const images = document.querySelectorAll(".banner-image");
  const dots = document.querySelectorAll(".dot");
  const totalImages = images.length;
  const intervalTime = 3000; // Thời gian chuyển đổi (3000ms = 3 giây)
  let slideInterval;

  function showImage(index) {
    // Ẩn hình hiện tại và bỏ trạng thái "active" của dấu chấm
    images[currentIndex].classList.remove("active");
    dots[currentIndex].classList.remove("active");

    // Cập nhật chỉ số của hình hiện tại
    currentIndex = index;

    // Hiển thị hình mới và thêm trạng thái "active" cho dấu chấm tương ứng
    images[currentIndex].classList.add("active");
    dots[currentIndex].classList.add("active");
  }

  function showNextImage() {
    const nextIndex = (currentIndex + 1) % totalImages;
    showImage(nextIndex);
  }

  function showPrevImage() {
    const prevIndex = (currentIndex - 1 + totalImages) % totalImages;
    showImage(prevIndex);
  }

  // Tự động chuyển đổi hình ảnh
  function startSlideShow() {
    slideInterval = setInterval(showNextImage, intervalTime);
  }

  function stopSlideShow() {
    clearInterval(slideInterval);
  }

  // Sự kiện click cho các dấu chấm
  dots.forEach((dot, index) => {
    dot.addEventListener("click", () => {
      showImage(index);
      stopSlideShow(); // Dừng slideshow khi người dùng nhấp vào dấu chấm
      startSlideShow(); // Khởi động lại slideshow
    });
  });

  // Sự kiện click cho các nút điều khiển
  document.querySelector(".prev-button").addEventListener("click", () => {
    showPrevImage();
    stopSlideShow(); // Dừng slideshow khi người dùng nhấp vào nút
    startSlideShow(); // Khởi động lại slideshow
  });

  document.querySelector(".next-button").addEventListener("click", () => {
    showNextImage();
    stopSlideShow(); // Dừng slideshow khi người dùng nhấp vào nút
    startSlideShow(); // Khởi động lại slideshow
  });

  // Khởi động slideshow khi trang được tải
  startSlideShow();
});


      // Gọi hàm khi trang được tải
      document.addEventListener("DOMContentLoaded", function () {
        loadComics("http://localhost:8080/comics/top10byslb", "best-sellers");
        loadComics("http://localhost:8080/comics/top10byid", "new-comics");
      });
    </script>
    <script src="js/Header.js"></script>
  </body>
</html>
